<div class="w-full bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-8 mx-auto">
    <h2 class="text-2xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-6">
        Change Password
    </h2>

    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="space-y-5">
        <!-- Current Password -->
        <div>
            <label class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2">
                Current Password
            </label>
            <input [type]="showPassword ? 'text' : 'password'" formControlName="currentPassword"
                class="w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-gray-100"
                placeholder="Enter current password" />
            @if (f['currentPassword'].touched && f['currentPassword'].invalid) {
            <p class="text-red-500 text-xs mt-1">
                Current password is required.
            </p>
            }
        </div>

        <!-- New Password -->
        <div>
            <label class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2">
                New Password
            </label>
            <input [type]="showPassword ? 'text' : 'password'" formControlName="newPassword"
                class="w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-gray-100"
                placeholder="Enter new password" />
            @if (f['newPassword'].touched && f['newPassword'].errors?.['minlength']) {
            <p class="text-red-500 text-xs mt-1">
                Password must be at least 8 characters.
            </p>
            }
        </div>

        <!-- Confirm Password -->
        <div>
            <label class="block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2">
                Confirm Password
            </label>
            <input [type]="showPassword ? 'text' : 'password'" formControlName="confirmPassword"
                class="w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-800 text-gray-800 dark:text-gray-100"
                placeholder="Confirm new password" />
            @if (passwordForm.errors?.['mismatch'] && f['confirmPassword'].touched) {
            <p class="text-red-500 text-xs mt-1">
                Passwords do not match.
            </p>
            }
        </div>

        <!-- Show Password Toggle -->
        <div class="flex items-center justify-between text-sm">
            <label class="flex items-center space-x-2 cursor-pointer">
                <input type="checkbox" (change)="togglePasswordVisibility()"
                    class="w-4 h-4 text-blue-500 border-gray-300 rounded focus:ring-blue-400" />
                <span class="text-gray-600 dark:text-gray-300">Show Passwords</span>
            </label>
        </div>

        <!-- Submit Button -->
        <button type="submit" [disabled]="passwordForm.invalid || isSubmitting"
            class="w-full bg-blue-600 text-white py-2.5 rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-colors duration-300">
            @if (!isSubmitting) {
            <span>Update Password</span>
            } @else {
            <span class="animate-pulse">Updating...</span>
            }
        </button>
    </form>
</div>